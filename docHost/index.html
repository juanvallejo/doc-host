<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>NNIDCMS</title>

    <link rel="stylesheet" href="assets/demo.css">
    <link rel="stylesheet" href="assets/form-basic.css">
    <style>
        #container {
            margin: 0px auto;
            width: 500px;
            height: 375px;
            border: 10px #333 solid;
        }

        #videoElement {
            width: 500px;
            height: 375px;
            background-color: #666;
        }

        #imgOutput {
            width: 500px;
            height: 375px;
            background-color: #666;
        }
    </style>
</head>


<header>
    <h1>Newport News Integrated Document Cloud Management System</h1>
    <!-- <a href="http://tutorialzine.com/2015/07/freebie-7-clean-and-responsive-forms/">Download</a>-->
</header>

<ul>
    <li><a href="index.html" class="active">Basic</a></li>
    <!--<li><a href="form-register.html">Register</a></li>-->
    <!--<li><a href="form-login.html">Login</a></li>-->
    <!--<li><a href="form-mini.html">Mini</a></li>-->
    <!--<li><a href="form-labels-on-top.html">Labels on Top</a></li>-->
    <!--<li><a href="form-validation.html">Validation</a></li>-->
    <li><a href="form-search.html">Search</a></li>
</ul>


<div class="main-content">

    <!-- You only need this form and the form-basic.css -->

    <form class="form-basic" method="post" action="/api/post" enctype="multipart/form-data">

        <div class="form-title-row">
            <h1>Begin Upload</h1>
        </div>

        <div class="form-row">
            <label>
                <span>User Name</span>
                <input type="text" name="name">
            </label>
        </div>

        <!--<div class="form-row">
            <label>
                <span>Email</span>
                <input type="email" name="email">
            </label>
        </div>

        <div class="form-row">
            <label>
                <span>Dropdown</span>
                <select name="dropdown">
                    <option>Option One</option>
                    <option>Option Two</option>
                    <option>Option Three</option>
                    <option>Option Four</option>
                </select>
            </label>
        </div> -->

        <div class="form-row">
            <label>
                <!--<span>Files to Upload</span>
                <textarea name="textarea"></textarea>-->
                Select a file: <input type="file" name="img">
            </label>


        </div>
        <div class="form-row">
            <label>
                Take a picture:
            </label>
            <video autoplay="true" id="videoElement" width="500" height="400"></video>
            <button id="capture" onclick="captureImage">Capture</button>
            <div id="imgOutput">

            </div>
        </div>
        <div class="form-row">
            <label>
                <span>Save Information on Device</span>
                <input type="checkbox" name="checkbox" checked>
            </label>
        </div>

        <!-- <div class="form-row">
             <label><span>Radio</span></label>
             <div class="form-radio-buttons">

                 <div>
                     <label>
                         <input type="radio" name="radio">
                         <span>Radio option 1</span>
                     </label>
                 </div>

                 <div>
                     <label>
                         <input type="radio" name="radio">
                         <span>Radio option 2</span>
                     </label>
                 </div>

                 <div>
                     <label>
                         <input type="radio" name="radio">
                         <span>Radio option 3</span>
                     </label>
                 </div>

             </div>
         </div>
            <-->

        <div class="form-row">
            <button type="submit">Submit Form</button>
        </div>

    </form>

    <script>
        window.addEventListener('load', onLoad);
        function onLoad() {
            // paste the following in the chrome console
            var video = document.querySelector("#videoElement");

            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

            if (navigator.getUserMedia) {
                navigator.getUserMedia({ video: true }, handleVideo, videoError);
            }

            function handleVideo(stream) {
                video.src = window.URL.createObjectURL(stream);
            }

            function videoError(e) {
                // do something
            }

        } //onLoad

        var video = document.getElementById("videoElement");
        var scale = 1;

        function captureImage(scale, callback) {

            callback = callback || function () { };

            var canvas = document.createElement("canvas");
            canvas.width = video.videoWidth * scale;
            canvas.height = video.videoHeight * scale;
            canvas.getContext('2d')
                  .drawImage(video, 0, 0, canvas.width, canvas.height);

            var img = document.createElement("img");
            img.src = canvas.toDataURL();

            img.addEventListener('load', function () {
                callback.call(this, img);
            });
        }


        document.body.addEventListener("click",
            function () { captureImage(1, function (img) { document.body.imgOutput.innerHTML = ""; document.body.imgOutput.appendChild(img); console.log(img); }) });


    </script>
</div>
</body>

</html>
